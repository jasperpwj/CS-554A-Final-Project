{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/lirupu/cs-554-web2/CS-554A-Final-Project/client/src/components/Song.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, withRouter } from 'react-router-dom';\nimport LibraryAddOutlined from '@material-ui/icons/LibraryAddOutlined';\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\nimport PauseCircleOutlineIcon from '@material-ui/icons/PauseCircleOutline';\nimport moment from \"moment\";\nimport { makeStyles } from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport playAction from '../actions/playAction';\nimport axios from 'axios';\nconst useStyles = makeStyles({\n  song_li: {\n    listStyleType: 'none',\n    borderBottom: '1px solid #666',\n    display: 'flex',\n    lineHeight: 'normal',\n    fontSize: '14px',\n    cursor: 'pointer',\n    marginLeft: '30px',\n    marginRight: '30px',\n    '&:hover': {\n      color: '#000000',\n      background: '#ccffcc'\n    }\n  },\n  song_title_header: {\n    width: '300px'\n  },\n  song_title: {\n    width: '300px'\n  },\n  song_title_header1: {\n    width: '300px'\n  },\n  song_album: {\n    width: '250px'\n  },\n  song_album_header: {\n    width: '250px'\n  },\n  song_artist: {\n    width: '200px'\n  },\n  song_artist_header: {\n    width: '200px'\n  },\n  song_length: {\n    width: '100px'\n  },\n  song_icon: {\n    width: '100px',\n    textAlign: 'left',\n    position: 'relative',\n    top: '10px',\n    '&:hover': {\n      color: '#006600'\n    }\n  },\n  song_length_header: {\n    width: '100px'\n  },\n  song_added: {\n    width: '200px'\n  },\n  song_added_header: {\n    width: '150px'\n  },\n  song_header_container: {\n    display: 'flex',\n    borderBottom: '1px solid #666',\n    paddingBottom: '6px',\n    marginTop: '20px'\n  },\n  play_control: {\n    width: '100px',\n    textAlign: 'center',\n    position: 'relative',\n    top: '10px',\n    '&:hover': {\n      color: '#006600'\n    }\n  },\n  link: {\n    textDecoration: 'none',\n    color: 'black',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  },\n  linkhover: {\n    textDecoration: 'underline'\n  }\n});\n\nconst Song = props => {\n  _s();\n\n  const classes = useStyles();\n  const [play, setPlay] = useState(false);\n  const [pause, setPause] = useState(true);\n  const allState = useSelector(state => state);\n  const songsPlay = allState.songsPlay;\n  const songR = allState.songsPlay.song;\n  const dispatch = useDispatch();\n  const {\n    song,\n    index\n  } = props;\n\n  function timeFormat(time) {\n    const min = Math.floor(time / 60000);\n    const sec = (time % 60000 / 1000).toFixed(0);\n    return min + \":\" + (sec < 10 ? \"0\" : \"\") + sec;\n  }\n\n  useEffect(() => {\n    if (songsPlay.globalPlay && song.track.id === songR.track.id) {\n      setPlay(true);\n    } else {\n      setPlay(false);\n    }\n  }, [songR, songsPlay.globalPlay]);\n\n  const handleChange = song => {\n    if (play) {\n      dispatch(playAction.pauseSong());\n      setPause(true);\n      setPlay(false); //pauseSong();\n    } else {\n      if (song.track.preview_url) {\n        console.log(song);\n        dispatch(playAction.playSong(song, index));\n        setPause(false);\n        setPlay(true); //audioControl(song);\n      }\n    }\n  };\n\n  const handleAdd = song => {\n    //console.log(song);\n    const addSong = {\n      artist: song.track.artists[0].name,\n      album: song.track.album ? song.track.album.name : '',\n      artistId: song.track.artists[0].id,\n      albumId: song.track.album ? song.track.album.id : '',\n      songName: song.track.name,\n      playUrl: song.track.preview_url,\n      songId: song.track.id\n    };\n    console.log(addSong);\n    axios.post('http://localhost:5000/songs/addLikeSongs', addSong);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: classes.song_li,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.play_control,\n      onClick: () => handleChange(song, index),\n      children: play && songsPlay.globalPlay && song.track.id === songR.track.id ? /*#__PURE__*/_jsxDEV(PauseCircleOutlineIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 77\n      }, this) : /*#__PURE__*/_jsxDEV(PlayCircleOutlineIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.song_icon,\n      onClick: () => handleAdd(song),\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        children: /*#__PURE__*/_jsxDEV(LibraryAddOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.song_title,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: song.track ? song.track.name : song.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: song.track ? `/albumList/${song.track.artists[0].id}` : `/albumList/${song.artists[0].id}`,\n      className: classes.link,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.song_artist,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: song.track ? song.track.artists[0].name : song.artists[0].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this), song.track.album ? /*#__PURE__*/_jsxDEV(Link, {\n      to: `/albums/songsList/${song.track.album.id}`,\n      className: classes.link,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.song_album,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: song.track ? song.track.album.name : '-'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.song_album,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: song.album ? song.album.name : '-'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.song_added,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: song.track ? moment(song.added_at).format(\"YYYY-MM-DD\") : song.album ? song.album.release_date : '-'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.song_length,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: song.track ? timeFormat(song.track.duration_ms) : timeFormat(song.duration_ms)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Song, \"7XF8ezwHIHgjL8N+s0cAR2Reep0=\", false, function () {\n  return [useStyles, useSelector, useDispatch];\n});\n\n_c = Song;\nexport default _c2 = withRouter(Song);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Song\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/lirupu/cs-554-web2/CS-554A-Final-Project/client/src/components/Song.js"],"names":["React","useState","useEffect","Link","withRouter","LibraryAddOutlined","PlayCircleOutlineIcon","PauseCircleOutlineIcon","moment","makeStyles","useSelector","useDispatch","playAction","axios","useStyles","song_li","listStyleType","borderBottom","display","lineHeight","fontSize","cursor","marginLeft","marginRight","color","background","song_title_header","width","song_title","song_title_header1","song_album","song_album_header","song_artist","song_artist_header","song_length","song_icon","textAlign","position","top","song_length_header","song_added","song_added_header","song_header_container","paddingBottom","marginTop","play_control","link","textDecoration","linkhover","Song","props","classes","play","setPlay","pause","setPause","allState","state","songsPlay","songR","song","dispatch","index","timeFormat","time","min","Math","floor","sec","toFixed","globalPlay","track","id","handleChange","pauseSong","preview_url","console","log","playSong","handleAdd","addSong","artist","artists","name","album","artistId","albumId","songName","playUrl","songId","post","added_at","format","release_date","duration_ms"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,kBAAP,MAA+B,uCAA/B;AACA,OAAOC,qBAAP,MAAkC,sCAAlC;AACA,OAAOC,sBAAP,MAAmC,uCAAnC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,SAAS,GAAGL,UAAU,CAAC;AAC5BM,EAAAA,OAAO,EAAE;AACFC,IAAAA,aAAa,EAAE,MADb;AAEFC,IAAAA,YAAY,EAAE,gBAFZ;AAGFC,IAAAA,OAAO,EAAE,MAHP;AAIFC,IAAAA,UAAU,EAAE,QAJV;AAKFC,IAAAA,QAAQ,EAAE,MALR;AAMFC,IAAAA,MAAM,EAAE,SANN;AAOFC,IAAAA,UAAU,EAAC,MAPT;AAQFC,IAAAA,WAAW,EAAC,MARV;AASF,eAAU;AACNC,MAAAA,KAAK,EAAE,SADD;AAENC,MAAAA,UAAU,EAAE;AAFN;AATR,GADmB;AAezBC,EAAAA,iBAAiB,EAAC;AACdC,IAAAA,KAAK,EAAE;AADO,GAfO;AAkBzBC,EAAAA,UAAU,EAAE;AACRD,IAAAA,KAAK,EAAE;AADC,GAlBa;AAqBzBE,EAAAA,kBAAkB,EAAE;AAChBF,IAAAA,KAAK,EAAE;AADS,GArBK;AAwBzBG,EAAAA,UAAU,EAAC;AACPH,IAAAA,KAAK,EAAE;AADA,GAxBc;AA2BzBI,EAAAA,iBAAiB,EAAE;AACfJ,IAAAA,KAAK,EAAE;AADQ,GA3BM;AA8BzBK,EAAAA,WAAW,EAAC;AACRL,IAAAA,KAAK,EAAE;AADC,GA9Ba;AAiCzBM,EAAAA,kBAAkB,EAAE;AAChBN,IAAAA,KAAK,EAAE;AADS,GAjCK;AAoCzBO,EAAAA,WAAW,EAAC;AACRP,IAAAA,KAAK,EAAE;AADC,GApCa;AAuCzBQ,EAAAA,SAAS,EAAC;AACNR,IAAAA,KAAK,EAAE,OADD;AAENS,IAAAA,SAAS,EAAC,MAFJ;AAGNC,IAAAA,QAAQ,EAAE,UAHJ;AAINC,IAAAA,GAAG,EAAE,MAJC;AAKN,eAAU;AACNd,MAAAA,KAAK,EAAE;AADD;AALJ,GAvCe;AAgDzBe,EAAAA,kBAAkB,EAAE;AAChBZ,IAAAA,KAAK,EAAE;AADS,GAhDK;AAmDzBa,EAAAA,UAAU,EAAC;AACPb,IAAAA,KAAK,EAAE;AADA,GAnDc;AAsDzBc,EAAAA,iBAAiB,EAAE;AACfd,IAAAA,KAAK,EAAE;AADQ,GAtDM;AAyDzBe,EAAAA,qBAAqB,EAAE;AACnBxB,IAAAA,OAAO,EAAE,MADU;AAEnBD,IAAAA,YAAY,EAAE,gBAFK;AAGnB0B,IAAAA,aAAa,EAAE,KAHI;AAInBC,IAAAA,SAAS,EAAE;AAJQ,GAzDE;AA+DzBC,EAAAA,YAAY,EAAC;AACTlB,IAAAA,KAAK,EAAC,OADG;AAETS,IAAAA,SAAS,EAAC,QAFD;AAGTC,IAAAA,QAAQ,EAAE,UAHD;AAITC,IAAAA,GAAG,EAAE,MAJI;AAKT,eAAU;AACNd,MAAAA,KAAK,EAAE;AADD;AALD,GA/DY;AAyEzBsB,EAAAA,IAAI,EAAE;AACFC,IAAAA,cAAc,EAAE,MADd;AAEFvB,IAAAA,KAAK,EAAE,OAFL;AAGF,eAAU;AACNuB,MAAAA,cAAc,EAAE;AADV;AAHR,GAzEmB;AAgFzBC,EAAAA,SAAS,EAAE;AACPD,IAAAA,cAAc,EAAE;AADT;AAhFc,CAAD,CAA5B;;AAqFA,MAAME,IAAI,GAAIC,KAAD,IAAS;AAAA;;AAClB,QAAMC,OAAO,GAAGrC,SAAS,EAAzB;AACA,QAAM,CAAEsC,IAAF,EAAQC,OAAR,IAAmBpD,QAAQ,CAAC,KAAD,CAAjC;AACA,QAAM,CAAEqD,KAAF,EAASC,QAAT,IAAqBtD,QAAQ,CAAC,IAAD,CAAnC;AACA,QAAMuD,QAAQ,GAAG9C,WAAW,CAAE+C,KAAD,IAAWA,KAAZ,CAA5B;AACA,QAAMC,SAAS,GAAGF,QAAQ,CAACE,SAA3B;AACA,QAAMC,KAAK,GAAGH,QAAQ,CAACE,SAAT,CAAmBE,IAAjC;AACA,QAAMC,QAAQ,GAAGlD,WAAW,EAA5B;AACA,QAAM;AAACiD,IAAAA,IAAD;AAAOE,IAAAA;AAAP,MAAcZ,KAApB;;AACA,WAASa,UAAT,CAAoBC,IAApB,EAAyB;AACrB,UAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,GAAC,KAAhB,CAAZ;AACA,UAAMI,GAAG,GAAG,CAAEJ,IAAI,GAAG,KAAR,GAAiB,IAAlB,EAAwBK,OAAxB,CAAgC,CAAhC,CAAZ;AACA,WAAOJ,GAAG,GAAC,GAAJ,IAASG,GAAG,GAAG,EAAN,GAAW,GAAX,GAAiB,EAA1B,IAA8BA,GAArC;AACH;;AAGDlE,EAAAA,SAAS,CAAC,MAAI;AACV,QAAGwD,SAAS,CAACY,UAAV,IAAsBV,IAAI,CAACW,KAAL,CAAWC,EAAX,KAAgBb,KAAK,CAACY,KAAN,CAAYC,EAArD,EAAwD;AACpDnB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACH,KAFD,MAEK;AACDA,MAAAA,OAAO,CAAC,KAAD,CAAP;AACH;AACJ,GANQ,EAMP,CAACM,KAAD,EAAOD,SAAS,CAACY,UAAjB,CANO,CAAT;;AAUA,QAAMG,YAAY,GAAEb,IAAD,IAAQ;AACvB,QAAGR,IAAH,EAAQ;AACJS,MAAAA,QAAQ,CAACjD,UAAU,CAAC8D,SAAX,EAAD,CAAR;AACAnB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAF,MAAAA,OAAO,CAAC,KAAD,CAAP,CAHI,CAIJ;AAEH,KAND,MAMK;AACD,UAAGO,IAAI,CAACW,KAAL,CAAWI,WAAd,EAA0B;AACtBC,QAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAZ;AACAC,QAAAA,QAAQ,CAACjD,UAAU,CAACkE,QAAX,CAAoBlB,IAApB,EAAyBE,KAAzB,CAAD,CAAR;AACAP,QAAAA,QAAQ,CAAC,KAAD,CAAR;AACAF,QAAAA,OAAO,CAAC,IAAD,CAAP,CAJsB,CAKtB;AACH;AACJ;AACJ,GAhBD;;AAiBA,QAAM0B,SAAS,GAAEnB,IAAD,IAAQ;AACpB;AACA,UAAMoB,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAErB,IAAI,CAACW,KAAL,CAAWW,OAAX,CAAmB,CAAnB,EAAsBC,IADlB;AAEZC,MAAAA,KAAK,EAAExB,IAAI,CAACW,KAAL,CAAWa,KAAX,GAAiBxB,IAAI,CAACW,KAAL,CAAWa,KAAX,CAAiBD,IAAlC,GAAyC,EAFpC;AAGZE,MAAAA,QAAQ,EAACzB,IAAI,CAACW,KAAL,CAAWW,OAAX,CAAmB,CAAnB,EAAsBV,EAHnB;AAIZc,MAAAA,OAAO,EAAC1B,IAAI,CAACW,KAAL,CAAWa,KAAX,GAAiBxB,IAAI,CAACW,KAAL,CAAWa,KAAX,CAAiBZ,EAAlC,GAAuC,EAJnC;AAKZe,MAAAA,QAAQ,EAAC3B,IAAI,CAACW,KAAL,CAAWY,IALR;AAMZK,MAAAA,OAAO,EAAC5B,IAAI,CAACW,KAAL,CAAWI,WANP;AAOZc,MAAAA,MAAM,EAAC7B,IAAI,CAACW,KAAL,CAAWC;AAPN,KAAhB;AASAI,IAAAA,OAAO,CAACC,GAAR,CAAYG,OAAZ;AACAnE,IAAAA,KAAK,CAAC6E,IAAN,CAAW,0CAAX,EAAuDV,OAAvD;AAEH,GAdD;;AAgBA,sBACI;AAAI,IAAA,SAAS,EAAE7B,OAAO,CAACpC,OAAvB;AAAA,4BACI;AAAM,MAAA,SAAS,EAAEoC,OAAO,CAACN,YAAzB;AAAuC,MAAA,OAAO,EAAE,MAAI4B,YAAY,CAACb,IAAD,EAAOE,KAAP,CAAhE;AAAA,gBACKV,IAAI,IAAEM,SAAS,CAACY,UAAhB,IAA4BV,IAAI,CAACW,KAAL,CAAWC,EAAX,KAAgBb,KAAK,CAACY,KAAN,CAAYC,EAAxD,gBAA2D,QAAC,sBAAD;AAAA;AAAA;AAAA;AAAA,cAA3D,gBAED,QAAC,qBAAD;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI;AAAK,MAAA,SAAS,EAAErB,OAAO,CAAChB,SAAxB;AAAmC,MAAA,OAAO,EAAE,MAAI4C,SAAS,CAACnB,IAAD,CAAzD;AAAA,6BACI;AAAA,+BACA,QAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAPJ,eAYI;AAAK,MAAA,SAAS,EAAET,OAAO,CAACvB,UAAxB;AAAA,6BACI;AAAA,kBAAIgC,IAAI,CAACW,KAAL,GAAYX,IAAI,CAACW,KAAL,CAAWY,IAAvB,GAA8BvB,IAAI,CAACuB;AAAvC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAZJ,eAgBI,QAAC,IAAD;AAAM,MAAA,EAAE,EAAEvB,IAAI,CAACW,KAAL,GAAY,cAAaX,IAAI,CAACW,KAAL,CAAWW,OAAX,CAAmB,CAAnB,EAAsBV,EAAG,EAAlD,GAAqD,cAAaZ,IAAI,CAACsB,OAAL,CAAa,CAAb,EAAgBV,EAAG,EAA/F;AAAkG,MAAA,SAAS,EAAErB,OAAO,CAACL,IAArH;AAAA,6BACA;AAAK,QAAA,SAAS,EAAEK,OAAO,CAACnB,WAAxB;AAAA,+BACI;AAAA,oBAAI4B,IAAI,CAACW,KAAL,GAAWX,IAAI,CAACW,KAAL,CAAWW,OAAX,CAAmB,CAAnB,EAAsBC,IAAjC,GAAsCvB,IAAI,CAACsB,OAAL,CAAa,CAAb,EAAgBC;AAA1D;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAhBJ,EAqBKvB,IAAI,CAACW,KAAL,CAAWa,KAAX,gBACD,QAAC,IAAD;AAAM,MAAA,EAAE,EAAG,qBAAoBxB,IAAI,CAACW,KAAL,CAAWa,KAAX,CAAiBZ,EAAG,EAAnD;AAAsD,MAAA,SAAS,EAAErB,OAAO,CAACL,IAAzE;AAAA,6BACA;AAAK,QAAA,SAAS,EAAEK,OAAO,CAACrB,UAAxB;AAAA,+BACI;AAAA,oBAAI8B,IAAI,CAACW,KAAL,GAAWX,IAAI,CAACW,KAAL,CAAWa,KAAX,CAAiBD,IAA5B,GAAiC;AAArC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YADC,gBAMD;AAAK,MAAA,SAAS,EAAEhC,OAAO,CAACrB,UAAxB;AAAA,6BACI;AAAA,kBAAI8B,IAAI,CAACwB,KAAL,GAAWxB,IAAI,CAACwB,KAAL,CAAWD,IAAtB,GAA2B;AAA/B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA3BJ,eA+BI;AAAK,MAAA,SAAS,EAAEhC,OAAO,CAACX,UAAxB;AAAA,6BACI;AAAA,kBAAIoB,IAAI,CAACW,KAAL,GAAY/D,MAAM,CAACoD,IAAI,CAAC+B,QAAN,CAAN,CAAsBC,MAAtB,CAA6B,YAA7B,CAAZ,GAAyDhC,IAAI,CAACwB,KAAL,GAAWxB,IAAI,CAACwB,KAAL,CAAWS,YAAtB,GAAmC;AAAhG;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA/BJ,eAmCI;AAAK,MAAA,SAAS,EAAE1C,OAAO,CAACjB,WAAxB;AAAA,6BACI;AAAA,kBAAI0B,IAAI,CAACW,KAAL,GAAWR,UAAU,CAACH,IAAI,CAACW,KAAL,CAAWuB,WAAZ,CAArB,GAA8C/B,UAAU,CAACH,IAAI,CAACkC,WAAN;AAA5D;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA0CH,CArGD;;GAAM7C,I;UACcnC,S,EAGCJ,W,EAGAC,W;;;KAPfsC,I;AAsGN,qBAAe7C,UAAU,CAAC6C,IAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, withRouter } from 'react-router-dom';\nimport LibraryAddOutlined from '@material-ui/icons/LibraryAddOutlined';\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\nimport PauseCircleOutlineIcon from '@material-ui/icons/PauseCircleOutline';\nimport moment from \"moment\";\nimport { makeStyles } from '@material-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport playAction from '../actions/playAction'\nimport axios from 'axios'\n\nconst useStyles = makeStyles({\n\tsong_li: {\n        listStyleType: 'none',\n        borderBottom: '1px solid #666',\n        display: 'flex',\n        lineHeight: 'normal',\n        fontSize: '14px',\n        cursor: 'pointer',\n        marginLeft:'30px',\n        marginRight:'30px',\n        '&:hover':{\n            color: '#000000',\n            background: '#ccffcc'\n        }\n    },\n    song_title_header:{\n        width: '300px'\n    },\n    song_title: {\n        width: '300px'\n    },\n    song_title_header1: {\n        width: '300px'\n    },\n    song_album:{\n        width: '250px'\n    },\n    song_album_header: {\n        width: '250px'\n    },\n    song_artist:{\n        width: '200px'\n    },\n    song_artist_header: {\n        width: '200px'\n    },\n    song_length:{\n        width: '100px',\n    },\n    song_icon:{\n        width: '100px',\n        textAlign:'left',\n        position: 'relative',\n        top: '10px',\n        '&:hover':{\n            color: '#006600',\n        }\n    },\n    song_length_header: {\n        width: '100px'\n    },\n    song_added:{\n        width: '200px'\n    },\n    song_added_header: {\n        width: '150px'\n    },\n    song_header_container: {\n        display: 'flex',\n        borderBottom: '1px solid #666',\n        paddingBottom: '6px',\n        marginTop: '20px'\n    },\n    play_control:{\n        width:'100px',\n        textAlign:'center',\n        position: 'relative',\n        top: '10px',\n        '&:hover':{\n            color: '#006600',\n        }\n\n    },\n    link: {\n        textDecoration: 'none',\n        color: 'black',\n        '&:hover':{\n            textDecoration: 'underline'\n        }\n    },\n    linkhover :{\n        textDecoration: 'underline'\n    }\n\n});\nconst Song = (props)=>{\n    const classes = useStyles();\n    const [ play, setPlay] = useState(false);\n    const [ pause, setPause] = useState(true);\n    const allState = useSelector((state) => state);\n    const songsPlay = allState.songsPlay;\n    const songR = allState.songsPlay.song;\n    const dispatch = useDispatch();\n    const {song, index}=props;\n    function timeFormat(time){\n        const min = Math.floor(time/60000);\n        const sec = ((time % 60000) / 1000).toFixed(0);\n        return min+\":\"+(sec < 10 ? \"0\" : \"\")+sec;\n    }\n\n\n    useEffect(()=>{\n        if(songsPlay.globalPlay&&song.track.id===songR.track.id){\n            setPlay(true);\n        }else{\n            setPlay(false);\n        }\n    },[songR,songsPlay.globalPlay])\n\n\n\n    const handleChange=(song)=>{\n        if(play){\n            dispatch(playAction.pauseSong());\n            setPause(true);\n            setPlay(false);\n            //pauseSong();\n\n        }else{\n            if(song.track.preview_url){\n                console.log(song);\n                dispatch(playAction.playSong(song,index));\n                setPause(false);\n                setPlay(true);\n                //audioControl(song);\n            }\n        }\n    }\n    const handleAdd=(song)=>{\n        //console.log(song);\n        const addSong = {\n            artist: song.track.artists[0].name,\n            album: song.track.album?song.track.album.name : '',\n            artistId:song.track.artists[0].id,\n            albumId:song.track.album?song.track.album.id : '',\n            songName:song.track.name,\n            playUrl:song.track.preview_url,\n            songId:song.track.id,\n        }\n        console.log(addSong);\n        axios.post('http://localhost:5000/songs/addLikeSongs', addSong);\n\n    }\n\n    return (\n        <li className={classes.song_li} >\n            <div  className={classes.play_control} onClick={()=>handleChange(song, index)}>\n                {play&&songsPlay.globalPlay&&song.track.id===songR.track.id?<PauseCircleOutlineIcon></PauseCircleOutlineIcon>\n                :\n                <PlayCircleOutlineIcon  ></PlayCircleOutlineIcon>\n                }\n            </div>\n            <div className={classes.song_icon} onClick={()=>handleAdd(song)}>\n                <i>\n                <LibraryAddOutlined></LibraryAddOutlined>\n                </i>\n            </div>\n            <div className={classes.song_title}>\n                <p>{song.track? song.track.name : song.name}</p>\n            </div>\n\n            <Link to={song.track?`/albumList/${song.track.artists[0].id}`:`/albumList/${song.artists[0].id}`} className={classes.link}>\n            <div className={classes.song_artist}>\n                <p>{song.track?song.track.artists[0].name:song.artists[0].name}</p>\n            </div>\n            </Link>\n            {song.track.album?\n            <Link to={`/albums/songsList/${song.track.album.id}`} className={classes.link}>\n            <div className={classes.song_album}>\n                <p>{song.track?song.track.album.name:'-'}</p>\n            </div>\n            </Link>:\n            <div className={classes.song_album}>\n                <p>{song.album?song.album.name:'-'}</p>\n            </div>}\n\n            <div className={classes.song_added}>\n                <p>{song.track? moment(song.added_at).format(\"YYYY-MM-DD\") : song.album?song.album.release_date:'-'}</p>\n            </div>\n\n            <div className={classes.song_length}>\n                <p>{song.track?timeFormat(song.track.duration_ms):timeFormat(song.duration_ms)}</p>\n            </div>\n\n        </li>\n    )\n}\nexport default withRouter(Song);"]},"metadata":{},"sourceType":"module"}