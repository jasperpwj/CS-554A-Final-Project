{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/lirupu/cs-554-web2/CS-554A-Final-Project/client/src/components/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useAppContext } from \"../../libs/contextLib\";\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport \"./Login.css\";\nexport default function Login() {\n  _s();\n\n  const {\n    userHasAuthenticated\n  } = useAppContext();\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [loginError, setLoginError] = useState(null); // console.log(\"email: \" + userEmail);\n  // console.log(\"error: \" + loginError);\n\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setState(prevState => ({ ...prevState,\n      [id]: value\n    }));\n  };\n\n  const handleSubmitClick = e => {\n    e.preventDefault();\n\n    try {\n      if (state.email == \"\") {\n        alert(\"email cannot be null\");\n      } else if (state.password == \"\") {\n        alert(\"password cannot be null\");\n      } else {\n        const user = {\n          email: state.email,\n          password: state.password\n        };\n\n        try {\n          axios.post('http://localhost:5000/users/login', user).then(response => setUserEmail(response.data.email)).catch(error => {\n            setLoginError(error.message);\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    } catch (e) {\n      console.log(\"error: \" + e);\n    }\n  };\n\n  if (userEmail) {\n    userHasAuthenticated(true);\n    window.sessionStorage.setItem(\"userEmail\", userEmail); // localStorage.setItem('test', 1);\n  } // const s = window.sessionStorage.getItem(\"userEmail\")\n  // console.log(\"session : \" + s);\n\n\n  if (loginError) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '30px'\n      },\n      children: [\"Error! \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 18\n      }, this), \"Email or password is wrong \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"http://localhost:3000/login\",\n        children: \"Back to Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: userEmail ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '30px'\n        },\n        children: [\"Have fun! \", window.sessionStorage.getItem(\"userEmail\"), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 69\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"http://localhost:3000/\",\n          children: \"Back to categories\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"loginbox\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          class: \"loginHere\",\n          children: \"Login Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group text-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"exampleInputEmail1\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"email\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Email\",\n            value: state.email,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group text-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"exampleInputPassword1\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"password\",\n            placeholder: \"Password\",\n            value: state.password,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"login\",\n          type: \"submit\",\n          className: \"login\",\n          onClick: handleSubmitClick,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"http://localhost:3000/register\",\n        children: \"Haven't created an account yet?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"2XtoaPjBKLgYgdLcaBV81OMRHwY=\", false, function () {\n  return [useAppContext];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/lirupu/cs-554-web2/CS-554A-Final-Project/client/src/components/Login/Login.js"],"names":["React","useState","useAppContext","axios","Redirect","Login","userHasAuthenticated","state","setState","email","password","userEmail","setUserEmail","loginError","setLoginError","handleChange","e","id","value","target","prevState","handleSubmitClick","preventDefault","alert","user","post","then","response","data","catch","error","message","console","log","window","sessionStorage","setItem","fontSize","getItem"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useAppContext } from \"../../libs/contextLib\";\nimport axios from 'axios'\nimport { Redirect } from \"react-router-dom\";\n\n\nimport \"./Login.css\";\n\nexport default function Login() {\n  const { userHasAuthenticated } = useAppContext();\n\n  const [state , setState] = useState({\n    \n    email : \"\",\n    password : \"\"\n  })\n  const [userEmail , setUserEmail] = useState(\"\");\n  const [loginError, setLoginError] = useState(null);\n\n\n  // console.log(\"email: \" + userEmail);\n  // console.log(\"error: \" + loginError);\n\n\n\n\n  const handleChange = (e) => {\n    const {id , value} = e.target   \n    setState(prevState => ({\n        ...prevState,\n        [id] : value\n    }))\n  }\n\n  const handleSubmitClick = (e) => {\n    e.preventDefault();\n    try {\n        \n        if (state.email == \"\") {\n            alert(\"email cannot be null\");\n        }\n        else if (state.password == \"\") {\n            alert(\"password cannot be null\");\n        }\n        else{\n          const user = {\n            email: state.email,\n            password: state.password\n          };\n          try {              \n            axios.post('http://localhost:5000/users/login', user)\n            .then(response => setUserEmail(response.data.email))\n            .catch(error => {\n                setLoginError(error.message);\n            })\n          } catch (error){\n            console.log(error);\n          }\n        }\n      \n          \n    }\n    catch(e) {\n        console.log(\"error: \" + e);\n    }\n  }\n\n  if (userEmail) {\n    userHasAuthenticated(true);\n    window.sessionStorage.setItem(\"userEmail\", userEmail);\n    // localStorage.setItem('test', 1);\n\n  }\n  // const s = window.sessionStorage.getItem(\"userEmail\")\n  // console.log(\"session : \" + s);\n\n  if (loginError) {\n\n    return(\n      <p style={{fontSize:'30px'}}>\n          Error! <br/>\n          Email or password is wrong <br/>\n          <a\n              href= \"http://localhost:3000/login\"\n          >\n              Back to Login\n          </a>\n      </p>\n  );\n\n  }\n  return (\n    <div>\n      {userEmail ? (\n        <div>\n            {/* <Redirect to=\"/\" /> */}\n            <p style={{fontSize:'30px'}}>\n              Have fun! {window.sessionStorage.getItem(\"userEmail\")}<br/>\n              \n              <a\n                  href= \"http://localhost:3000/\"\n              >\n                  Back to categories\n              </a>\n            </p>\n        </div>\n      ) : (\n            <div class=\"loginbox\">\n            <form>\n              <h1 class=\"loginHere\">Login Here</h1>\n\n\n              <div className=\"form-group text-left\">\n              <label htmlFor=\"exampleInputEmail1\">Email</label>\n              <input type=\"email\" \n                    className=\"form-control\" \n                    id=\"email\" \n                    aria-describedby=\"emailHelp\" \n                    placeholder=\"Email\" \n                    value={state.email}\n                    onChange={handleChange}\n              />\n              \n              </div>\n              <div className=\"form-group text-left\">\n                  <label htmlFor=\"exampleInputPassword1\">Password</label>\n                  <input type=\"password\" \n                      className=\"form-control\" \n                      id=\"password\" \n                      placeholder=\"Password\"\n                      value={state.password}\n                      onChange={handleChange} \n                  />\n              </div>\n              \n              <button\n                  class=\"login\" \n                  type=\"submit\" \n                  className=\"login\"\n                  onClick={handleSubmitClick}\n              >\n                  Login\n              </button>\n            </form>\n\n            <a href=\"http://localhost:3000/register\">Haven't created an account yet?</a>\n\n\n          {/* <p> email : {state.email}</p>\n          <p> password : {state.password}</p> */}\n\n        </div>\n      )}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}